/* =================================================================== */
/* ATTESTA - Feuille de Style de l'Espace Administration (v3)          */
/* =================================================================== */

/* --- 1. Variables de Couleurs (Palette "Terre Douce" adoucie) --- */
:root {
    --primary-color: #4a443f; /* Marron foncé pour les titres et accents */
    --accent-color: #D5BDAF;  /* Marron clair pour les éléments actifs */
    --light-bg: #F8F9FA;      /* Fond très clair (quasi blanc) pour une meilleure lisibilité */
    --surface-color: #FFFFFF; /* Fond des cartes et tables */
    --border-color: #E9ECEF;  /* Couleur des bordures subtiles */
    --text-color: #212529;    /* Couleur du texte principal (noir doux) */
    --text-muted: #6C757D;   /* Couleur du texte secondaire (gris) */

    /* Couleurs de statut adoucies */
    --color-attente-bg: #FFF3CD;    --color-attente-text: #664d03;
    --color-validee-bg: #D4EDDA;    --color-validee-text: #155724;
    --color-refusee-bg: #F8D7DA;    --color-refusee-text: #721C24;
    --color-soumise-bg: #D1ECF1;    --color-soumise-text: #0C5460;
    --color-cloturee-bg: #E2E3E5;   --color-cloturee-text: #383D41;

    --transition-speed: 0.3s ease;
}

/* --- 2. Variables pour le Mode Sombre --- */
body.dark-mode {
    --light-bg: #1A1A1D;
    --surface-color: #252529;
    --border-color: #38383D;
    --text-color: #e0e0e0;
    --text-muted: #8c8c8e;
}

/* --- 3. Styles Généraux --- */
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: 'Poppins', sans-serif;
    background-color: var(--light-bg);
    color: var(--text-color);
    transition: background-color var(--transition-speed), color var(--transition-speed);
    display: flex;
}

/* --- 4. Barre Latérale (Sidebar) Dynamique --- */
.sidebar {
    width: 260px;
    height: 100vh;
    background-color: var(--surface-color);
    position: fixed;
    z-index: 1000;
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    transition: width var(--transition-speed), background-color var(--transition-speed), border-color var(--transition-speed);
}
.sidebar-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 15px;
    min-height: 120px;
    border-bottom: 1px solid var(--border-color);
    transition: border-color var(--transition-speed);
}
.sidebar-logo {
    height: 70px;
    width: 70px;
    object-fit: contain;
    transition: all var(--transition-speed);
    margin-bottom: 10px;
}
.brand-text { text-align: center; overflow: hidden; white-space: nowrap; transition: opacity 0.1s; }
.sidebar-brand { display: none; } /* On cache le nom ATTESTA, le logo suffit */
.sidebar-sub-brand { font-size: 0.8rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;}

.sidebar-menu { list-style: none; flex-grow: 1; padding-top: 20px; }
.sidebar-menu li { position: relative; }
.sidebar-menu li a {
    display: flex;
    align-items: center;
    padding: 14px 25px;
    margin: 0 15px 8px 15px;
    color: var(--text-muted);
    text-decoration: none;
    border-radius: 8px;
    font-weight: 500;
    transition: all 0.2s;
    overflow: hidden;
    white-space: nowrap;
}
.sidebar-menu li a i { font-size: 1.4rem; min-width: 25px; margin-right: 15px; }
.sidebar-menu li.active a { background-color: var(--primary-color); color: white; }
.sidebar-menu li a:hover { background-color: var(--accent-color); color: var(--primary-color); }

.sidebar-footer {
    padding: 15px;
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    overflow: hidden;
}
.sidebar-footer a { color: var(--text-muted); text-decoration: none; display: flex; align-items: center; padding: 10px; border-radius: 8px; cursor: pointer; }
.sidebar-footer a:hover { background-color: var(--light-bg); }
.sidebar-footer a i { font-size: 1.4rem; }
.sidebar-footer a span { margin-left: 15px; white-space: nowrap;}

/* Styles pour la barre réduite (SANS le survol) */
.sidebar.sidebar-collapsed { width: 90px; }
.sidebar.sidebar-collapsed .brand-text,
.sidebar.sidebar-collapsed .sidebar-menu span,
.sidebar.sidebar-collapsed .sidebar-footer span { display: none; }
.sidebar.sidebar-collapsed .sidebar-header { justify-content: center; padding: 15px 10px; }
.sidebar.sidebar-collapsed .sidebar-logo { width: 45px; height: 45px; margin-bottom: 0; }
.sidebar.sidebar-collapsed .sidebar-menu a,
.sidebar.sidebar-collapsed .sidebar-footer a { justify-content: center; margin: 0 10px 8px 10px; padding: 14px 10px; }
.sidebar.sidebar-collapsed .sidebar-menu a i { margin-right: 0; }
.sidebar.sidebar-collapsed #sidebarToggle i { transform: rotate(180deg); }

.sidebar.sidebar-collapsed li::after {
    content: attr(data-tooltip);
    position: absolute;
    left: 100%;
    top: 50%;
    transform: translateY(-50%);
    padding: 5px 12px;
    background-color: var(--primary-color);
    color: white;
    border-radius: 5px;
    font-size: 0.85rem;
    font-weight: 500;
    white-space: nowrap;
    margin-left: 15px;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s 0.1s, visibility 0.2s 0.1s;
    pointer-events: none;
    z-index: 1000;
}
.sidebar.sidebar-collapsed li:hover::after { opacity: 1; visibility: visible; }

/* --- 5. Contenu Principal --- */
.main-content {
    margin-left: 260px;
    width: calc(100% - 260px);
    transition: margin-left var(--transition-speed), width var(--transition-speed);
}
.sidebar.sidebar-collapsed + .main-content { margin-left: 90px; width: calc(100% - 90px); }
.main-header { display: flex; justify-content: space-between; align-items: center; padding: 15px 30px; background-color: var(--surface-color); border-bottom: 1px solid var(--border-color); position: sticky; top: 0; z-index: 100; transition: background-color var(--transition-speed), border-color var(--transition-speed); }
.main-header h2 { font-size: 1.5rem; color: var(--primary-color); margin: 0; }
body.dark-mode .main-header h2 { color: var(--accent-color); }
.header-right { display: flex; align-items: center; gap: 25px; }
.dark-mode-toggle { cursor: pointer; font-size: 1.3rem; color: var(--text-muted); }
.admin-profile { display: flex; align-items: center; gap: 10px; font-weight: 500; }
.admin-profile i { font-size: 1.8rem; color: var(--primary-color); }
.content-wrapper { padding: 30px; }

/* --- 6. Cartes & Graphiques (Grille à 3 colonnes) --- */
.stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; }
.stat-card { background-color: var(--surface-color); padding: 25px; border-radius: 12px; display: flex; align-items: center; gap: 20px; border: 1px solid var(--border-color); transition: all var(--transition-speed); }
.stat-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
body.dark-mode .stat-card:hover { box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
.stat-card .icon { font-size: 2.2rem; padding: 18px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
.stat-card h3 { font-size: 2.5rem; margin: 0; font-weight: 600; color: var(--primary-color); }
body.dark-mode .stat-card h3 { color: var(--text-color); }
.stat-card p { margin: 0; color: var(--text-muted); font-weight: 500;}
.charts-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 30px; margin-top: 30px; }
.chart-container { background-color: var(--surface-color); padding: 25px; border-radius: 12px; border: 1px solid var(--border-color); }
.chart-container h4 { margin-bottom: 20px; font-size: 1.1rem; font-weight: 600; color: var(--primary-color); }
body.dark-mode .chart-container h4 { color: var(--text-color); }

/* --- 7. Tableaux (Design "Strict") & Filtres --- */
.table-container { background-color: var(--surface-color); border-radius: 12px; padding: 25px; border: 1px solid var(--border-color); }
.filters { display: flex; justify-content: space-between; gap: 15px; margin-bottom: 25px; flex-wrap: wrap; align-items: center; }
.filters .filter-group { display: flex; gap: 10px; }
.filters .btn { border: 2px solid var(--border-color); background-color: transparent; color: var(--text-muted); padding: 8px 18px; border-radius: 8px; cursor: pointer; font-weight: 500; transition: all 0.2s; }
.filters .btn:hover { border-color: var(--accent-color); color: var(--primary-color); }
.filters .btn.active { background-color: var(--primary-color); color: white; border-color: var(--primary-color); }
.filters input, .filters select { padding: 10px 14px; border-radius: 8px; border: 2px solid var(--border-color); background-color: var(--light-bg); color: var(--text-color); font-family: 'Poppins', sans-serif; font-size: 0.9rem; }
.filters input:focus, .filters select:focus { outline: none; border-color: var(--accent-color); }
.data-table { width: 100%; border-collapse: collapse; }
.data-table th, .data-table td { padding: 16px; text-align: left; border-bottom: 1px solid var(--border-color); }
.data-table th { font-weight: 600; color: var(--text-muted); font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.5px; background-color: var(--light-bg); }
.data-table tbody tr { transition: background-color 0.2s; }
.data-table tbody tr:hover { background-color: color-mix(in srgb, var(--accent-color), transparent 85%); }
.status { padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; text-transform: capitalize; }
.status.en-attente { background-color: var(--color-attente-bg); color: var(--color-attente-text); }
.status.validee { background-color: var(--color-validee-bg); color: var(--color-validee-text); }
.status.refusee { background-color: var(--color-refusee-bg); color: var(--color-refusee-text); }
.status.soumise { background-color: var(--color-soumise-bg); color: var(--color-soumise-text); }
.status.cloturee { background-color: var(--color-cloturee-bg); color: var(--color-cloturee-text); }
.actions button { border: none; background: none; cursor: pointer; font-size: 1.3rem; margin: 0 5px; color: var(--text-muted); transition: color 0.2s; }
.actions .action-view:hover { color: #007bff; }
.actions .action-validate:hover { color: var(--color-validee-text); }
.actions .action-reject:hover { color: var(--color-refusee-text); }
.actions .action-reply:hover { color: var(--primary-color); }

